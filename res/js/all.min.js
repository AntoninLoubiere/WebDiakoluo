if(navigator.storage&&navigator.storage.persist){}else{if(localStorage.getItem('modal-persist-c-storage')!="true"){loadModal('persist-storage-c-warning');}}function loadModal(id){let request=new XMLHttpRequest();request.open('GET','/WebDiakoluo/res/modals/'+id+'.html');request.responseType='html';request.send();var modal=document.createElement('div');modal.classList=['modal'];modal.id=id+'-modal';document.body.appendChild(modal);document.body.classList.add("hide-scroll");request.onload=function(){if(request.status==200){modal.innerHTML=request.response;}else{deleteModal(id);}}}
function hideModal(id){document.getElementById(id+"-modal").classList.add('hide');document.body.classList.remove("hide-scroll");}
function showModal(id){document.getElementById(id+"-modal").classList.remove('hide');document.body.classList.add("hide-scroll");}
function deleteModal(id){hideModal(id);document.body.removeChild(document.getElementById(id+'-modal'))}
function modalShowCheck(id){localStorage.setItem(id,document.getElementById('modal-show').checked);}var LANGUAGES=['en','fr'];var LANGUAGES_BUTTONS={'en':"&#127468;&#127463; English",'fr':"&#127467;&#127479; Français"};var PATH_OFFSET=13;var DEFAULT_LANGUAGE='en';var translations=null;var universal=null;var languageSelector=document.getElementById("language-selector");class I18nElement extends HTMLElement{static get observedAttributes(){return['key'];}
constructor(){super();this.textContent=this.getAttribute('key');}
updateI18n(){if(universal==null||translations==null)return;let key=this.getAttribute("key");let tr=translations[key];if(tr!=undefined){this.innerHTML=tr;}else{tr=universal[key];if(tr==undefined){console.warn("A key isn't available in this language !",key);this.innerHTML=key;}else{this.innerHTML=tr;}}}
attributeChangedCallback(name,oldValue,newValue){if(name=='key'&&newValue!=null){this.updateI18n();}}}
function initialise(){customElements.define('x-i18n',I18nElement);let parent=document.getElementById('language-selector-childs');for(var i=0;i<LANGUAGES.length;i++){let lang=LANGUAGES[i];let button=document.createElement('div');button.classList=['selector-dropdown-child'];button.innerHTML=LANGUAGES_BUTTONS[lang];button.setAttribute('lang',lang)
button.onclick=function(){setLang(lang,false);languageSelector.textContent=button.textContent;localStorage.setItem("lang",lang);}
parent.appendChild(button);}
let lang=localStorage.getItem("lang");if(lang==null){lang=detectLang();if(document.location.pathname!="/WebDiakoluo/legal.html")loadModal('cookies');}
setLang(lang,true);let request=new XMLHttpRequest();request.open('GET','/WebDiakoluo/res/translations/universal.json');request.responseType='json';request.send();request.onload=function(){universal=request.response;onSetLang();}}
function setLang(lang,updateButton){let request=new XMLHttpRequest();request.open('GET','/WebDiakoluo/res/translations/'+lang+'.json');request.responseType='json';request.send();request.onload=function(){if(request.response==null){langError(lang);}else{translations=request.response
onSetLang();}}
request.onerror=function(e){console.log("Test");langError(lang);};if(updateButton){languageSelector.textContent=document.querySelector("[lang="+lang+"]").textContent;}}
function onSetLang(){if(universal!=null&&translations!=null)
updateAll();}
function langError(lang){console.error("Can't load the language:",lang)
if(translations==null){let l=detectLang();if(l==lang){if(lang==DEFAULT_LANGUAGE){console.error("FATAL ERROR: can't load default language !")}else{setLang(DEFAULT_LANGUAGE);}}else{setLang(l);}}}
function updateAll(){let i18n=document.getElementsByTagName('x-i18n');for(var i=0;i<i18n.length;i++){i18n[i].updateI18n();}
updatePageTitle();}
function detectLang(){for(var i=0;i<navigator.languages.length;i++){for(var j=0;j<LANGUAGES.length;j++){if(navigator.languages[i].toLowerCase()==LANGUAGES[j]||navigator.languages[i].substring(0,2).toLowerCase()==LANGUAGES[j]){return LANGUAGES[j];}}}
return DEFAULT_LANGUAGE;}
function cookiesCallback(){deleteModal('cookies');localStorage.setItem("lang",detectLang());}
function updatePageTitle(){if(translations==null){setTimeout(updatePageTitle,100);return;}
let path=document.location.pathname.substring(PATH_OFFSET);let title=translations['title-'+path];if(title==undefined){title=translations['title-'+path+'index.html']
if(title==undefined){title="";console.warn('Title for this page not found:',path)}}
let pageTitle=document.getElementById('page-title');if(title==""){document.title="Diakôluô";if(pageTitle){pageTitle.textContent="Diakôluô";}}else{document.title=title+" - Diakôluô"
if(pageTitle){pageTitle.textContent=title;}}}
initialise();class IncludeElement extends HTMLElement{static get observedAttributes(){return['key'];}
constructor(){super();}
update(){let obj=this;let key=this.getAttribute('key');let request=new XMLHttpRequest();request.open('GET','/WebDiakoluo/res/include/'+key+'.html');request.responseType='html';request.send();request.onload=function(){obj.innerHTML=request.response;}
request.onerror=function(){obj.innerHTML=key;}}
attributeChangedCallback(name,oldValue,newValue){if(name=='key'&&newValue!=null){this.update();}}}
customElements.define('x-include',IncludeElement);